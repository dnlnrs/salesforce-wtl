/*
 *
 * Copyright (c) 2018 Daniele Lenares (https://github.com/dnlnrs)
 * Licensed under GPL-3.0 (https://opensource.org/licenses/GPL-3.0) license.
 *
 * Version 1.0.0
 *
*/
var SalesforceWTL={init:function(e){if(void 0===e)return!1;function t(t){var a=document.getElementById(e.formId);if(e.hasOwnProperty("mapping")){for(var d=0;d<a.elements.length;d++)if("checkbox"!=a.elements[d].type||0!=a.elements[d].checked){var i=a.elements[d].name,m=a.elements[d].value;if(void 0!==e.mapping[i]){var r=document.createElement("input"),l=e.mapping[i];r.id=l,r.name=l,r.type="hidden",r.value=n(l,m),t.appendChild(r)}}}else for(d=0;d<a.elements.length;d++)if("checkbox"!=a.elements[d].type||0!=a.elements[d].checked){m=a.elements[d].value;var o=a.elements[d].name;(r=document.createElement("input")).id=o,r.name=o,r.value=n(o,m),r.type="text",t.appendChild(r)}}function n(t,n){return e.hasOwnProperty("dataTransform")&&e.dataTransform.hasOwnProperty(t)?(0,e.dataTransform[t])(n):n}function a(t){if(e.hasOwnProperty("additionalFields"))for(var n in e.additionalFields){(a=document.createElement("input")).id=n,a.name=n,a.type="hidden",a.value=e.additionalFields[n],t.appendChild(a)}var a;e.hasOwnProperty("debugEmail")&&""!==e.debugEmail&&((a=document.createElement("input")).id="debug",a.name="debug",a.type="hidden",a.value="1",t.appendChild(a),(a=document.createElement("input")).id="debugEmail",a.name="debugEmail",a.type="hidden",a.value=e.debugEmail,t.appendChild(a))}!function(){(n=document.createElement("iframe")).name="sfwtlframe",n.id="sfwtlframe",n.src="about:blank",n.style.display="none",e.hasOwnProperty("afterSubmit")&&""!=e.afterSubmit&&(n.onload=e.afterSubmit),document.body.appendChild(n);var n,d,i=((d=document.createElement("form")).name="sfwtlform",d.id="sfwtlform",d.action=e.action,d.method="POST",d.target="sfwtlframe",d.style.display="none",d.setAttribute("data-sent",!1),document.body.appendChild(d),d);e.hasOwnProperty("directSubmit")&&!0===e.directSubmit?(t(i),a(i),i.submit(),document.getElementById(e.formId).setAttribute("data-salesforcesent",!0)):document.getElementById(e.formId).addEventListener("submit",function(n){t(i),a(i),n.preventDefault(),i.submit(),document.getElementById(e.formId).setAttribute("data-salesforcesent",!0)})}()}};
